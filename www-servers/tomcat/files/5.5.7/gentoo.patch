--- ../jakarta-tomcat-5.5.7-src.orig/jakarta-tomcat-catalina/catalina/src/bin/catalina.sh	2005-02-14 16:01:22.437029992 +0100
+++ jakarta-tomcat-catalina/catalina/src/bin/catalina.sh	2005-02-14 16:36:43.132635256 +0100
@@ -42,6 +42,10 @@
 # $Id: catalina.sh,v 1.18 2005/01/10 18:16:10 remm Exp $
 # -----------------------------------------------------------------------------
 
+# source the appropriate files right away
+source /etc/profile
+source /etc/conf.d/tomcat-5.5
+
 # OS specific support.  $var _must_ be set to either true or false.
 cygwin=false
 os400=false
@@ -118,7 +122,7 @@
 if [ -n "$JSSE_HOME" ]; then
   CLASSPATH="$CLASSPATH":"$JSSE_HOME"/lib/jcert.jar:"$JSSE_HOME"/lib/jnet.jar:"$JSSE_HOME"/lib/jsse.jar
 fi
-CLASSPATH="$CLASSPATH":"$CATALINA_HOME"/bin/bootstrap.jar:"$CATALINA_HOME"/bin/commons-logging-api.jar
+CLASSPATH="$CLASSPATH":"$CATALINA_HOME"/bin/bootstrap.jar:`java-config -p commons-logging`
 
 if [ -z "$CATALINA_BASE" ] ; then
   CATALINA_BASE="$CATALINA_HOME"
